#### 编译与链接

- 2.1、被隐藏了的过程
  - 程序编译过程分为预处理、编译、汇编、链接
  - gcc   -E    -S     -c      
  - 预编译过程主要处理那些源代码中以“#”开始的预编译指令
  - 编译过程就是把预处理完的文件进行一系列词法分析、语法分析、语义分析及优化后生产相应的汇编代码文件
  - 汇编是将汇编代码转变成机器可以执行的指令，每一个汇编语句几乎都对应一条机器指令
- 2.2、编译器做了什么
  - 编译器就是将高级语言翻译成机器语言的工具
  - 编译过程分为6步：扫描、语法分析、语义分析、源代码优化、代码生成和目标代码优化
  - 词法分析：源代码程序被输入到扫描器，扫描器进行简单地词法分析，运用一种类似有限状态机的算法将源代码的字符序列分割成一系列的记号（Token）
  - 语法分析：语法分析器将由扫描器产生的记号进行语法分析，从而产生语法树。分析过程采用上下文无关语法
  - 语义分析：分为静态语义和动态语义；静态语义是指在编译期可以确定的语义；动态语义是只有在运行期才能确定的语义
  - 中间语言生成：源代码优化器往往将整个语法树转换成中间代码，它是语法树的顺序表示，跟目标机器和运行时环境无关
  - 目标代码生成和优化：编译后端主要包括代码生成器和目标代码优化器，代码生成器将中间代码转换成目标机器代码，依赖于目标机器，不同机器有不同字长、寄存器、数据类型等；目标代码优化器将上述目标代码进行优化
- 2.3、链接器年龄比编译器长
  - 重定位：重新计算各个目标的地址过程
  - 模块之间的通信：1、模块间的函数调用；2、模块间的变量访问。函数访问须知道目标函数地址，变量访问也须知道目标变量地址，也可以归结为模块间符号的引用
- 2.4、模块拼装-静态链接
  - 链接：组装模块的过程，链接的主要内容是把各个模块之间的相互引用部分处理好，使得各个模块之间能够正确地衔接
  - 链接过程包括：地址和空间分配、符号决议、重定位
  - 把xxx.o的Object File统一称为目标文件
  - 修正地址的过程叫做重定位，也就是给程序中每个这样的绝对地址引用的位置“打补丁”，使得它们指向正确的地址。每个要被修正的地方叫一个重定位入口

