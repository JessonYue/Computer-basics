### 并发编程

> 并发程序是由在时间上重叠的一组逻辑流组成的

#### 三种构建并发程序的机制

- 进程
  - 由内核自动调度和维护
  - 有各自独立的虚拟地址空间，进程间要共享数据，必须要有显示式的 IPC 机制
    -  IPC 机制
      - 在同一台主机上  不同进程间
        - waitpid 函数、信号、管道、先进先出（FIFO）、系统 V 共享内存、系统 V 信号量
      - 不同主机间  
        - 通过Socket 交换任意的字节流
  - 父子进程共享文件表
- I/0多路复用
  - 事件驱动程序创建自己的并发逻辑流，逻辑流被模型化为状态机。使用 select 函数
    - 状态机
      - 一组状态
      - 输入事件
      - 转移
        - 将状态和输入事件映射到状态
        - 每个转移是将一个输入状态，输入事件对映射到输出状态
  - 运行在单一进程上下文中，所以流之间的共享数据速度快且容易。
- 线程
  - 每个线程都有它自己独立的线程上下文，包括线程 ID、栈、栈指针、程序计数器、条件码和通用目的寄存器值
  - 由内核自动调度的
  - 运行在单一进程的上下文中，共享数据速度快且容易

#### 同步对共享数据的并发访问

- 信号量操作
  - 提供对共享数据的互斥访问

#### 竞争

#### 死锁

