​													第五章 优化程序性能

编译器必须小心地对程序只使用安全的优化，也就是说对于程序可能遇到的所有可能的情况，在C余元标准提供的保证之下，优化后的到的程序和为优化的斑斑油一样的行为。

GCC 只能完成基本的优化，更深层的优化 GCC 并不能做到，需要程序猿以一种简化编译器生成高效代码的任务的方式来编写程序。

用度量标准每元素的周期书，作为一种表示程序性能并指导我门改进代码的方式。

包括识别要执行多次（例如在循环里）但是计算结果并不改变的计算，被称为代码移动。

常规循环针对不同长度的字符串的额世纪测量值，会随着字符串的长度增长而变得陡峭，通过上述证明，当长度增加，所需要的时间会变得更多，并且通过观察规律则可以发现，时间或增加2的幂。

而把循环条件调用移出循环，只是在循环外执行一次，性能得到了很大的提升。

每次在循环中都执行读写操作，会增加很多不必要的操作，在使用中只是需要进行一次读和写操作，在这种情况下，引入一个临时变量，他在循环中累积计算出来的值。这样会减少很多不要的引用，减少内存开支。

对多条指令进行求值，这个现象称为指令级并行。

疑问？如果存在并行现象，如何去确定先后顺序并保证正确性的呢？

当指令遇到分支的时候，一种可能会选择分支，控制被传送到分支目标，另一种不选择分支，继续执行下一条指令。

每个运算都是由延迟、发射时间和容量来刻画的

1、延迟：表示完成运算所需要的总时间

2、发射时间：表示两个连续的同类型的运算之间需要的最小时钟周期数

3、容量：表示能够执行该运算的功能单元的数量

对于循环形成的代码片段，我们可以访问到的寄存器分为四类：

只读：作为源值，可以用来计算内存地址，但是不能修改

只写：制作为数据传送操作。

局部：在循环内部被修改和使用。

循环：在一次迭代产生的值会在下一次迭代中使用

疑问？计算机中的只读和只写与寄存器的只读与只写是不是一个概念的呢

