# 深入理解计算机系统 第四章

第四章 处理器体系结构

---

 1. Y86-64指令集体系结构
 定义一个指令集体系结构包括定义各种状态单元，指令集和他们的编码、一组编程规范和异常事件处理

2. 程序员可见状态
Y86-64程序中的每条指令都会读取或修改处理器状态的某些部分，这个被称为程序员可见状态。
3. Y86-64指令
movq指令分成4个不同的指令，irmovq、rrmovq、mrmovq和rmmovq；
整数操作指令 addq、subq、andq、xorq 这些指令会设置三个条件码 ZF、SF、OF（零、符号、溢出）；
7个跳转指令 jmp、jle、jl、je、jge、jg；
6个条件传送指令 cmovle、cmovle、cmovl、cmove、cmovne、cmovge、cmovg；
call指令 返回地址入栈，然后跳到目的地址 ret指令从这样的调用返回；
pushq和popq指令实现入栈和出栈；
halt指令停止指令执行；

4. 逻辑设计和硬件控制语言HCL
逻辑门是数字电路的基本设计单元，它们产生的输出，等于它们输入位值的某个布尔函数
布尔函数 AND 、 OR、 NOT的标准符号

5. Y86-64的顺序实现
处理一条指令包括很多操作，将它们组织成某个特殊的阶段序列，即使指令的动作差异很大，但所有的指令都遵循统一的序列。每一步的具体处理取决于正在执行的指令；

取指：取值阶段从内存读取指令字节，地址为程序计数器（PC）的值。
译码：译码阶段从寄存器文件读入最多两个操作数；
执行：在执行阶段，算术/逻辑单元（ALU）要么执行指令指明的操作，计算内存引用地址，要么增加或减少栈指针。
访存：访存阶段可以将数据写入内存，或者从内存读数据
写回：写回阶段最多可以写两个结果到寄存器文件
更新PC：将PC设置成下一个指令地址

6. Y86-64流水线流程



总结：主要了解处理器指令集体系结构，以及整个流程实现，这里提供了一套顺序说明，即一条接着一条执行，学习了Y86-64的指令集，及其的相关属性，并了解了不同指令在五个阶段处理方式，根据被执行的指令不同，每个阶段的操作也是不相同的，整体感觉还是了解了一些概念性的东西，针对处理器的优化等还是觉得有些抽象
 



