第一章 计算机系统漫游

知识点：
1.GCC编译过程，分四个阶段

源程序（文本）---> 预处理（CPP）--（.i形式文件扩展名）-->编译器（ccl）--（.s形式文件扩展名）-->汇编器（as）--（.o形式文件扩展名）-->链接器（ld）---->可执行目标二进制程序

第一：预处理过程，就是根据(.c)文件字符以#号字符开头的命令，修改原始的C程序，一般就是读取系统文件的内容，并将它直接插入到程序文本中，处理预编译指令（如#define，#if，#ifdefine）
      删除所有的注释（//、/**/），得到一个新的C程序，通常以.i形式作为文件扩展名
第二：编译器（ccl）将文本文件.i 翻译成文本文件.s，它包含一个汇编语言程序;该程序包含函数main的方法定义，（补充：在这个过程中包含了 词法分析，语法分析，语义分析，源代码优化，代码生成，目标代码优化）

第三：汇编器阶段是将.s文件翻译成机器语言指令，并将结果保存在目标文件（.o）中，该文件属于二进制文件，其中包含17个字节是main的指令编码（17是怎么算的）

第四：链接阶段是将所有的目标文件（.o）都链接起来；例如hello程序调用printf函数，存在于printf.o的单独预编译文件，而这个文件必须以某种方式合并到我们的hello.o程序中；链接器(ld)
      负责处理这种合并，最终得到一个hello可执行文件（可以被加载到内存中，由系统执行）
	  
注：此处只是了解程序编译的一个过程，至于每个步骤的具体处理，目前没有涉及，针对此处一些补充内容，参考了https://www.jianshu.com/p/04335d843ec7


2.系统硬件组成

1.总线：是贯穿整个系统的一组电子管道，携带信息字节负责各个部件传递类似android的Intent

2.I/O设备：是系统与外部交互的通道

3.主存 : 是一个临时存储设备，在处理器执行程序时，用来存放程序和程序处理数据

4.处理器：中央处理单元（CPU），是解释或执行存储在主存中的指令引擎，处理器在指令的要求下会做以下几个操作
         加载：从主存复制一个字节或者一个字到寄存器，覆盖寄存器原来的值
		 存储：从寄存器复制一个字节或一个字到主存的某个位置，覆盖原来位置上的值
		 操作：两个寄存器的内容复制到ALU，ALU对这两个字做算术运算，并将结果存放到寄存器中，覆盖寄存器中原来的值
		 跳转：从指令本身抽取一个字，并将这个字复制到程序计数器（PC）中，覆盖原PC中的值



3.高速缓存

    高速缓存存在的意义就是提高程序的性能，至于具体用法，后续跟踪
	
	一般寄存器文件分层L0到L6 L0就是寄存器，L1到L3是三层高速缓存，L4是我们的主存，L5是本地二级缓存，一般指本地磁盘，L6远程存储，一般是指网络存储	
	
4.操作系统管理硬件

  1.进程，进程是操作系统对一个正在运行的程序抽象，是程序执行的最小单位（每个进程拥有独立的内存），对于单核处理器来说，可以看到多个进程并发现象，这是通过处理器在进程间切换实现
  2.线程，线程是程序执行的最小单元，一个进程至少有一个线程，各个线程之间可以共享内存空间（即所在的进程内存空间）
  3.虚拟内存，虚拟内存是一个抽象概念，为每个进程提供一个独占使用主存的假象，每个进程看到的内存是一致的，这块内存称为虚拟地址空间，虚拟地址空间由大量的精准的定义的区构成，
    并且每个区都有特有的功能，大概分区如下：
     3.1 程序代码和数据， 对所有进程说，代码是从同一固定地址开始，一般就是指可执行文件加载进来占用的
	 3.2 堆，代码和数据区紧随着就是运行时堆，代码和数据区在进程一开始就被指定了大小，当运行调用申请释放内存时，所产生的内存地址空间就在此处，堆可以在运行时动态扩张和收缩（此处我觉的应该会有一个大小限制，具体不太清楚）
	 3.3 共享库，大约在地址空间的中间部分是一块存放像C标准库和数学库这样的共享库代码和数据区域
	 3.4 栈，位于用户虚拟地址空间顶部，一般被称为用户栈，编译器用它来实现函数时调用，和堆一样，用户栈在程序执行期间可以动态扩张和收缩
	 3.5 内核虚拟内存，地址空间顶部的区域是为内核保留，不允许应用程序读写这个区域的内容或者直接调用内核代码定义函数，必须调用内核来执行这些操作
	 
	 注：这一块虚拟内存地址空间的大小分配规则是什么，包含每个分区的大小，留着记录，后续跟进
	 
5.文件
  文件就是字节序列，包含I/O设备，磁盘，键盘，显示器，网络，都可以看成文件，（万物皆文件）
  
  
总结：看完第一章，最深的感触就是抽象，通过抽象，把所有我们看的见的东西，都转换为另一个虚拟的东西，如I/O设备抽象为文件，虚拟内存是对程序存储器的抽象，进程是对一个正在运行的程序抽象（处理器、主存、和I/O设备）；
      对整个计算机构成有了一个大的了解，并且了解各个硬件的交互，在这里最多的操作就是复制，并且耗费的时间也都在这个上面，
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
	