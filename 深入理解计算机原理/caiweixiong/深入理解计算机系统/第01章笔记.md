[TOC]
# 《深入理解计算机系统》读书总结
## 第一章.计算机系统漫游
### 总结
本章通过从编写到运行一个C程序，引出了下面几点：
- 文本文件的存储方式
- 编译系统
- 系统硬件的组成与工作
- 操作系统
- 网络
把这些点串起来就是：
1. C源文件以ASCII码编码并以字节序列的方式存储到文本文件中
2. 通过编译系统处理，生成可执行目标程序，这个过程经过：预处理、编译、汇编、链接等一系列操作
3. 要运行这个程序，就需要使用到操作系统的命令行解释器程序，通过命令行解释器程序输入命令
4. 利用直接存储器存取技术，将目标程序的代码和数据加载到主存
5. 处理器内的程序计数器监测到主存中有需要处理的指令，处理器再通过指令级架构，执行相应的指令
6. 如果是远程操作，则最终将操作结果通过网络从远程的服务端返回到本地的客户端
- 第一章通过一个简单的例子，带我们从
源文件->编译系统->操作系统->硬件->网络快速的过了一遍，它们一同构成的计算机系统

### 问题
1. 如何利用编译器过程调用，避免缓冲区溢出？
2. switch 比一系列 if else 高效？
3. 函数调用的开销有多大？
4. while 循环比 for 高效？
5. 指针引用比数组索引高效？
- 答：是的，指针引用省去了地址的计算
6. 循环求和结果放在本地变量比放在通过引用传递过来的参数运行的快？
7. 简单排列下算术表达式中的括号就能让函数运行得更快？
8. 无法解析一个引用是什么意思？
9. 静态变量和全局变量的区别是什么？
- 答：静态变量在c程序中也是访问界定符，只能在同个文件中使用
10. 不同的c文件定义名字相同的两个全局变量会发生什么？
- 答：编译时报错
11. 静态库和动态库的区别？
12. 在命令行上排列库的顺序有什么影响？
13. 为什么有些链接错误直到运行时才会出现？
- 上面的问题都是作者抛出来的，先记录下来，等我通读全书后回来填满它

### 思考
1. 为什么C程序是不可以移植的？
- 答：在还没看文章之前，我一直认为，这里的C程序指的是.c文件，但是看完.c文件从编译到生成最终可以执行，还有硬件部分的处理器指令级架构，我突然就明白了，为什么C程序不可移植，为什么Android中，通过交叉编译生成的.so文件要有多个版本，因为C程序指的是通过编译生成的可执行程序，而且不同的处理器的指令级架构是不同的，而Android手机中的处理器不是完全相同的，这就导致了必须要生成多个不同版本的.so文件，这也是为什么C程序不可移植
2. 操作系统的位数是否决定内存的大小，虚拟内存是否与内存一样？
- 答：在issues上我看到了一个同学的提问，一开始我也是跟他是同样的理解，后来看到路哥的回答才发现自己理解错了，然后查了一下，32位系统的最大内存，理解到了所谓的32位系统，其实是为了32位处理器而设计的，也就意味着操作系统的位数跟内存没有直接关系，32位处理器一次最大的处理为32位，所以最大就是32位的寻址，也就是4G，而处理器直接操作的是主存中的值，所以最大的也就是4G，但是，查阅资料，发现，部分企业版的32位操作系统最大支持128G内存，这时想了下，第一章有介绍，单核处理器和多核处理器，所以自己大胆的猜测，这128G的内存，肯定就是多核处理器，至于虚拟内存与主存，它们一个是操作系统虚拟出来的，而一个是物理硬件上定死的，虚拟内存是操作系统与主存、闪存、磁盘等物理硬件相互协助产生的，至于如果做到的，在第一章介绍系统的分层结构时，有一个概念，上一级的内存可以做下一级的内存的高速缓存，所以，磁盘的高速缓存就是主存，虽然现在还不知道操作系统是如何做到的虚拟内存，但是我觉得，肯定跟个高速缓存有关系

### 结语
- 书本其实是已经看到浮点数了，但是很多的练习还没有做，打算把练习做完了再把第二章的总结补上，第一次做总结，就像路哥说的，很难，今早6点开始做，做了一整天，终于逼自己写出来了，写出来后很多的理解都加深了，相信以后会越来越好的，一个星期，可能成长不大，但是我明显的能感觉到自己成长了！奥利给！
- 立个flag：从下周起要加快阅读的速度，至少看到第四章！
