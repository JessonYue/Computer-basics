# **第二周读书总结** #

**一、第四章  处理器体系结构**

这一章主要讲述了指令系统、硬件控制语言（hcl）、以及流水线的通用原理。

然后我们自己动手实现一个我们自己的86处理器。

其中主要内容包含以下几点：

* Y86指令集：各种状态、指令集、编码、异常处理；

* 逻辑设计和硬件控制语言：逻辑门，集合关系，组合电路

* 流水线通用原理，计算流水线；如何操作流水线，如何处理冒险与冲突

* 动手实现我们自己的Y86：分为顺序实现和流水线实现

**详细知识点可参见思维导图**

# 这一章看的有些懵，感觉便向和硬件打交道方面，所以感觉看完后还是很多不懂，回头看了下大纲，总体梳理了下，只是觉的有一个粗略的印象，细节方面没有掌握 #


# **二、第五章 优化程序性能** #

这一章通篇讲述如何编写出运行快的程序，总的概括下来，主要有三方面的要素：

	1、选择合适的数据结构和算法

	2、充分利用编译器，用有效的方式让编译器进行优化

	3、对于大的程序，可以进行分解

本章的主要内容如下：

* 编译器的局限性

* 表示程序的性能CPE（每元素的周期数）

* 程序的优化过程：
	
	1、原始版本combine1

	2、消除循环的低效率combine2

	3、减少过程调用combine3

	4、消除不必要的内存引用combine4

* 现代编译器的瓶颈

* 循环展开combine5

* 提高并行性combine6

* 理解内存性能

本章的优化程序性能，可以总结以下几点：

	1、选择适当的算法和数据结构

	2、基本编码原则：

		* 消除连续的函数调用，有可能的时候将计算移动到循环体外
		
		* 消除不必要的存储器引用，引入临时变量保存中间值
		
	3、低级优化：

		* 展开循环
		
		* 提高并行，使用多个累积变量或者重新结合
		*

**详细知识点可参见思维导图**

# **这一章主要讲解如何去优化程序，从程序本身到现代编译器的瓶颈，最后提出了循环展开、提高并行性等方法。 但是在实际的优化程序的过程中，我们不可能像书中举的那个简单程序那样，快速的分析出一个程序片段的性能瓶颈，毕竟在真实的项目中，代码量是相当大的，所以就要以实际的项目代码来进行优化。** #
		

# **三、第六章 存储器层次结构** #

在本章中，我们了解到了：

* 目前已有的存储技术，这些存储器是如何被组织成层次结构的

* 什么是拥有良好局部性的程序以及编写这样的程序需要注意的问题

* 为什么说拥有良好局部性的程序会执行的更快

* 引出高速缓存，并介绍几种高速缓存

1、存储技术：

* 随机访问存储器：静态RAM和动态RAM

* 磁盘存储
	
	1、磁盘构造

	2、磁盘容量

	3、磁盘操作	

	4、连接IO设备

	5、访问磁盘

2、局部性

* 对程序数据访问的局部性

* 取指令的局部性

3、存储器层次结构

* 基本缓存原理

* 缓存命中：当程序需要第k+1层数据块14的时候，程序会在当前存储的k层，寻找块14的数据，刚好14在k层的话，就是一个缓存命中，这比从k+1层读取的速度要快很多

* 缓存不命中：当程序需要访问到块12的时候，在k层没有该数据块，就是一个缓存不命中，这时候就会从k+1层中读取块12将其替换到k层的一个数据块（覆盖或驱逐一个已有的数据块）。程序还是从k层访问块12。

4、高速缓存存储器

* 通用高速缓存存储器内部结构

*　直接映射高速缓存（每个组只有一行的简单访问模式）

	１、组选择：地址位中的组索引匹配高速缓存中的组

	２、行匹配

	３、字选择

*　组相连高速缓存（每组多于1行的高速缓存）

* 全相连高速缓存（只有一个组）：只适合小规模的高速缓存

* 结构剖析

5、编写高速缓存友好的代码

	1、让最常见的情况运行的快

	2、尽量减小每个循环内部的缓存不命中数量

6、高速缓存对程序性能的影响

* 存储器山：存储器的性能不能简单的用一个数字来描述，如果实在要形容的话，是一座时间局部性和空间局部性构成的山

* 排列循环以提高空间局部性

**详细知识点可参见思维导图**


# **本周总结：
这一周本来是要计划进入第二部分的，但是目前只是勉强把第六章看完，第七章还没有看，速度是很慢了，并且有的章节感觉只是过了一遍，当时看的时候知道了，合上书就记不清了，特别是第四章，还有一些概念性的知识点，记不住，感觉就是没有理解。

下周计划把整本书过完，有什么不明白的地方，等后续再抽时间去消化，加油！！！** #


																					日期：2020年6月13日