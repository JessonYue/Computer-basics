# 深入理解计算机系统----读书笔记

还没读完这本书，目前看完第十一章。

从目前的阅读中，我觉得有很大的收获，我对Linux系统的认知有了质的飞越。我是几乎没有C语言基础的，对计算机这块也基本没有什么知识储备，只会Android应用层开发。

我就按我学习的章节来讲吧，毕竟我也没什么文笔。

 

第一章给了我一个计算机系统大致的认知，学习到从C语言代码如何转变成一个可执行的程序，比我想象的要复杂。还有很多计算机基础知识，比如，我以前是不知道Android系统和iOS系统都是基于Linux系统的。

 

第二章是我看的最细的部分，因为感觉大把时间细细看，后面就感觉这么看来不及了。首先是学到了C语言中的基本数据机构，运算逻辑，这些知识都挺简单的。就是各种补码，反码公式推导有些费力，然后就是一些算数溢出。比较难得点是浮点数，可能因为开始的不熟悉，还有数据表示有些复杂，现在慢慢可以理解。

 

第三章印象中主要是讲寄存器和指令运算。现在也没记住啥指令，但是在看的过程中，大致可以理解指令意图，还有看一些简单的C语言的编程代码，毕竟我是没有C语言基础的。另外，我在这章遗留了问题，就是我对指针的概念还理解不好，停留在基础的层面：指针即数组，比如:char **p，还有书中的那个(int *)p+7的例子我就不太理解。这部分知识我打算接下来去网上找资料细读一下。C语言语法我也挺差劲的。

 

第四章的主要知识点是流水线，在保证程序准确执行的前提下，通过并发，有序的执行指令集，提高整个系统的吞吐量。但这部分控制逻辑其实挺复杂的，我也没有记得太多，大致就是知道这么回事。指令处理包括以下几个阶段：取指，译码，执行，访存，写回，更新PC(访存和写回感觉干的事情就是更新目标地址的值，像是干一件事情)。然后还有一个就是，预测执行的指令线路，要远超前于当前执行的这条指令。

 

第五章讲了程序性能优化。我主要印象就是这章对循环体的优化讲了很多，比如局部变量在循环体中执行会比内存引用要快，2x2展开，2x1a展开。大致就是这些有用的知识点。可能是我没有读的太细。

 

第六章介绍了计算机的存储设备，SRAM，DRAM，ROM，磁盘，基于闪存的固态硬盘。还有一些奇怪的知识点，比如，良好的局部性可以提高程序性能，这个性能应该是通过减少缓存不命中处罚得到的。另外，高一级存储设备向低一级的存储设备取值的过程没有没有看懂，因为时间关系也没有去深究它，以后有机会再看几遍。

 

第七章虽然很重要，但是我消化不良。很多概念对我来说都很新。还有那个可重定位目标文件里面的字段虽然可以通过阅读看到，但也没有深刻印象。符号表大致可以理解。静态链接和动态链接可能理解的不是太到位。希望这部分知识可以找同学补一补。有一些知识有印象，但是过一段时间又忘了。

 

第八章讲了异常控制流，这章看的还是比较细致，章节中有许多概念，像异常，进程，并发，上下文切换，用户模式，内核模式等等。也许是因为这些概念在做Android开发的过程中或多或少都有接触，因此看的比较能够理解。信号处理虽然之前没接触过，但是看的比较慢，也能够理解，也接触了一些系统函数，希望过一段时间不要忘记了

 

第九章是讲虚拟内存，坦白说，看到这章的内容，颠覆了我以前很多错误的内存认知。比如，原来虚拟地址是分在磁盘上面的，而物理地址是存在主存当中的。原来虚拟地址也是真实存在的，里面也存放着该对象的数据。还讲到了mmap，以前在看Android进程间通信的资料时，内核数据复制，讲到了这块，但也只是讲到了皮毛。实际上，mmap是通过文件描述符fd指定的磁盘文件在虚拟内存上开辟一块空间（由内核开辟），而在Android进程间通信当中，是会映射到另一个进程的虚拟地址当中。这部分如何实现，我现在还不知道，但至少知道之前理解的太片面了。内存的动态分配理论知识可以看懂，具体实现分配器没有看很细。9.11说的常见错误，对我来说是很吃力的，我C语言的语法很差，需要提升。

 

第十章讲了系统级的I/O大致读了一遍，里面讲了一些读写文件的方法，进程使打开享文件的方式，标准I/O，fopen,fclose函数。

 

第十一章看了网络模型，了解域名，IP地址这些概念。主要是看了套接字，套接字被定义为一个有相应描述符的打开文件，是通信的一个端点。主要看了客户端和服务端通信的流程：

服务端打开listenfd->客户端打开clientfd,并调用connect->服务端accept,然后打开connectfd。然后客户端就可以通过clientfd读写数据，服务端通过connectfd读写数据。这小节主要介绍了这些函数，参数的意义。整体来讲，这章节收获也不大。

 

第十二章还没看。我想看的细一些，通过这些章节阅读，觉得这本书很有价值，慢慢的理解，比囫囵吞枣看个概念要强太多。其中，第二章，第三章，第四章，第六章，第九章的内容让我觉得视野都开阔了一些这些章节的内容让我觉得新奇，尤其是第九章，我很感兴趣，虽然有一部分内容我还看不懂。在阅读过后，我最近在编程时，仿佛能感受到因为自己牺牲性能来提高代码可读性，会给系统的运行带来怎样的压力。而系统在这么多压力下，还能这么好的运行，赞叹人类的智慧！