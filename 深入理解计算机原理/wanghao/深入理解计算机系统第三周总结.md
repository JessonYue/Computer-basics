深入理解计算机系统第三周总结

第九章 虚拟内存

地址空间是一个非负整数地址的有序集合，如果地址空间的整数是连续的，则是一个线性地址空间。

虚拟内存被组织为一个由存放在磁盘上的N个连续的字节大小的单元组成的数组。

虚拟页面的集合被分为三个不相交的子集：未分配的：虚拟内存系统中未分配的页；缓存的：当前已缓存在物理内存的已分配的页；未缓存的：未缓存在物理内存的已分配的页

虚拟内存是对主存的一个抽象。

现代系统通过将虚拟内存片和磁盘上的文件片关联起来，来初始化虚拟内存片，这个过程叫内存映射。



第十章 系统级I/O

输入/输出（I/O）是在主存和外部设备（磁盘驱动器、终端、网络）之间复制数据的过程。输入操作是从I/O设备复制数据到主存，输出操作使从主存复制数据到I/O设备。



每个Linux文件都有一个类型来表明它在系统中的角色:    普通文件包含任意数据: 应用程序常常要区分文本文件和二进制文件，文本文件是只含有ASCII和Unicode字符的普通文件。二进制文件时所有的其他文件，对内核系统而言，文本文件和二进制文件没有区别;  目录 :是包含一组链接的文件，其中每个链接都将一个文件名映射到一个文件，这个文件可能是另一个目录;  套接字:是用来与另一个进程进行跨网络通信的文件.

RIO提供了两种不同的函数：无缓冲的输入输出函数和有缓冲的输入输出函数。

I/O重定向允许用户将磁盘文件和标准输入输出联系在一起(dup2函数)

Unix I/O比标准 I/O 更适合网络编程。



第十一章 网络编程：

客户端-服务端模型中的基本操作是事务。

客户端-服务器模型中的基本操作是事务，一个客户端-服务器的事务由以下四步组成

1. 当一个客户端需要服务时，它向服务器发送一个请求，发起一个事务。例如，当web浏览器需要一个文件时，它就发送一个请求给web服务器
2. 服务器收到请求后，解释它，并以适当的方式操作它的资源。例如，当web服务器收到web浏览器发的请求后，它就读一个磁盘文件
3. 服务器给客户端发送一个响应，并等待下一个请求。例如，web服务器将文件发送回客户端
4. 客户端收到响应并处理它。例如，当web浏览器收到来自服务器的一页后，就在屏幕上显示此页。

![image-20200620180008595](https://tva1.sinaimg.cn/large/007S8ZIlgy1gfywr8gn3gj314608ywmr.jpg)



![image-20200620193336156](https://tva1.sinaimg.cn/large/007S8ZIlgy1gfyzgi4vfmj316c0lkh45.jpg)

第十二章 并发编程：

并发编程的三种方式：进程，I/O多路复用，线程。

![image-20200620210930778](https://tva1.sinaimg.cn/large/007S8ZIlgy1gfz289y2ugj30me0dkqcu.jpg)



线程安全

线程不安全函数类：不保护共享变量的函数，保持多个跨越调用的状态的函数， 返回指向静态变量的指针的函数 ，调用线程不安全函数的函数。



![image-20200620211935040](https://tva1.sinaimg.cn/large/007S8ZIlgy1gfz2iqt00cj310m0fik2o.jpg)



信号量引入了一种潜在的令人厌恶的运行时错误，叫做死锁，它指的是一组线程被阻塞了，等待一个永远也不会为真的条件。

![image-20200620212137487](https://tva1.sinaimg.cn/large/007S8ZIlgy1gfz2kwfkkoj31100s0e35.jpg)



给定所有互斥操作的一个全序，如果每个线程都是以一种顺序获得互斥锁并以相反的顺序释放，那么这个程序就是无死锁的。.

![image-20200620213637816](https://tva1.sinaimg.cn/large/007S8ZIlgy1gfz30hkht0j30ye0nqarx.jpg)

一个并发程序是由在时间上重叠的一组逻辑组成的。

进程和线程都是由内核自由调度的。