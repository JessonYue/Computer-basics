## 程序的机器表示
> 汇编代码是机器代码的文本表示。  

高级语言编程（c java）屏蔽程序的细节，而采用汇编可以帮助我们检测程序中运行效率较低的部分。

### 3.2 程序编码
gcc -0g -0 p p1.c p2.c  

较高级别的优化会使汇编代码严重变形，产生的机器代码和源代码之间关系难以理解。所以编译选项使用-0g作为编译选项

#### 3.2.1 机器级代码
两种重要的概念
- 1.指令集架构：定义机器级程序的格式和行为，定义处理器状态、指令格式，以及每条指令对状态的影响。处理器硬件可以并发执行许多指令
- 2.机械级程序使用的内存地址是虚拟内存，提供的内存看上去是一个非常大的字节数组。


程序的内存包含：
- 可执行机械代码
- 操作系统需要的信息
- 用来管理过程调用和返回的运行时栈
- 用户分配的内存块malloc realloc 

操作系统负责将虚拟地址翻译成实际处理器内存中的物理地址

反汇编器的使用：objdump -d xx.o

#### 3.2.3 关于格式的注解
以"."开头的行都是指导汇编器和链接器工作的伪指令。
### 3.3 数据格式
在x86-64位机器中，指针占8字节

| c声明  | intel数据类型 | 汇编代码 | 大小（字节） |
| ------ | :-----------: | :------: | :----------: |
| char   |     字节      |    b     |      1       |
| short  |      字       |    w     |      2       |
| int    |     双字      |    l     |      4       |
| long   |     四字      |    q     |      8       |
| char*  |     四字      |    q     |      8       |
| float  |    单精度     |    s     |      4       |
| double |    双精度     |    l     |      8       |

### 3.4访问信息

通用寄存器

|64 | 31  |  15  |  7  |  0用途  |
|------|:-----------:|:-----------:|:-----------:|:-----------:|
|	%rax	|%eax|%ax|%al|返回值|
|%rbx|%ebx|%bx|%bl|被调用者保存|
|%rcx|%ecx|%cx|%cl|第4个参数|
|%rdx|%edx|%dx|%dl|第3个参数|
|%rsi|%esi|%si|%sil|第2个参数|
|%rdi|%edi|%di|%dil|第1个参数|
|%rbp|%ebp|%bp|%bpl|（基址寄存器）被调用者保存|
|%rsp|%esp|%sp|%spl|栈指针|
|%r8|%r8d|%r8w|%r8b|第5个参数|
|%r9|%r9d|%r9w|%r9b|第6个参数|
|%r10|%r10d|%r10w|%r10b|调用者保存|
|%r11|%r11d|%r11w|%r11b|调用者保存|
|%r12|%r12d|%r12w|%r12b|被调用者保存|
|%r13|%r13d|%r13w|%r13b|被调用者保存|
|%r14|%r14d|%r14w|%r14b|被调用者保存|
|%r15|%r15d|%r15w|%r15b|被调用者保存|

