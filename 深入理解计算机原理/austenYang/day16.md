当系统启动时，操作系统分配和初始化一张 **异常表** 的跳转表，使得表目录 k 包含异常 k 的处理程序的地址。

![image-20200616070314817](/Users/austen/Library/Application Support/typora-user-images/image-20200616070314817.png)

在运行时，处理器检测到发生了一个事件，并确定了相应的异常号 k。随后，处理器触发异常，方法是执行间接过程调用，通过异常表的目录 k，转到相应的处理程序。下图表示了 处理器如何使用异常表来形成适当的异常处理程序地址。

异常表的起始地址被方到一个叫做 **异常表寄存地址器** 的特殊 CPU 寄存器里。

![image-20200616070711776](https://note-austen-1256667106.cos.ap-beijing.myqcloud.com/2020-06-15-230713.png)

### 8.1.2 异常的类别

异常分为四类：



![image-20200616071616175](https://note-austen-1256667106.cos.ap-beijing.myqcloud.com/2020-06-15-231617.png)

1. 中断（interupt）

![image-20200616071847927](https://note-austen-1256667106.cos.ap-beijing.myqcloud.com/2020-06-15-231849.png)

2. 陷阱（trap）

用户程序经常需要向内核请求服务，比如读一个文件（read）、创建一个新的进程（fork）、加载一个新的程序（execve）,或者终止当前进程（exit）。为了允许对这些内核服务的受控的访问，系统提供的一条特殊的 “syscall n” 的指令，当用户程序想要请求服务 n 时，可以执行这条指令。执行 syscall 指令会导致一个到异常处理程序的陷阱，这个处理程序解析参数，并调用适当的内核程序。

![image-20200616072748282](https://note-austen-1256667106.cos.ap-beijing.myqcloud.com/2020-06-15-232750.png)

3. 故障（fault）

![image-20200616072922489](https://note-austen-1256667106.cos.ap-beijing.myqcloud.com/2020-06-15-232924.png)

4. 终止（abort）

   终止程序从不将控制返回给应用程序。

   系统级函数

### 8.2 进程

进程提供给应用程序的关键抽象：

* 一个独立的逻辑控制流，它提供一个假象，好像我们程序独占地使用处理器。
* 一个私有的地址空间，它提供一个假象，好像我们的程序独占地使用处理器。

多个流并发的执行称为并发。一个进程和其他进程轮流运行的概念称为多任务。一个进程执行它的控制流的一部分的每个时间段叫作 时间片。因此，多任务也叫作 时间片。

进程是轮流的使用处理器的。每个进程执行它流的一部分，然后被 抢占挂起（preempted）(暂时挂起)，然后轮到其他进程。

多个流并发地执行的一般现象称为 并发（concurrency）。一个进程和其他进程轮流运行的概念称为 多任务（multitasking）。一个进程执行它的控制流的一部分的每一时间段叫做 时间片（time slice）。因此，多任务也叫做 时间分片（time slicing）。

如果两个流运行在不同的处理器核或计算机上，那么它们称为并行流（parallel flow）,它们并行地运行（running in parallel）,并且并行地执行（parallel execution）。

进程为每个程序提供 **私有地址空间**。和这个空间中某个地址相关联的那个内存字节是不能被其他进程读或者写的，从这个意义上来说，这个地址空间是私有的。

![image-20200617005439567](https://note-austen-1256667106.cos.ap-beijing.myqcloud.com/2020-06-16-165441.png)



