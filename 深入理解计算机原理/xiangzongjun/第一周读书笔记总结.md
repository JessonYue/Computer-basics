## 								第一章 计算机系统漫游

#### **一、**<u>**信息就是位+上下文**</u>

**1.1     一个程序的生命周期就是从一个源程序或者说源文件开始的，也就是通过编译器创建保存的文本文件，源程序实际就是由0和1组成的位序列，8个位被组织成一组成为字节。**

       **1.2     大部分的现代计算机系统都使用ASCII标准来表示文本字符，比如下面程序的ASCII码表示如图：**


​		

```c
#include <stdio.h>
int main(){
    printf("hello world\n");
    return 0;
}
```

![ascii](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/ascii.png)

     **1.3   C语言的起源**

![origin](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/origin.png)

    **1.4  源程序从创建到可执行程序的过程**

![guocheng](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/guocheng.png)

      预处理阶段：预处理器cpp跟菊字符#开头的命令修改原始的C程序，通常以.i作为文件扩展名
    
      编译阶段：编译器ccl将文本文件hello.i翻译成文本文件hello.s,包含一个汇编语言程序
    
      汇编阶段：编译器as将hello.s翻译成机器语言指令，把这些指令打包成可重定位目标程序的格式，并将结果保存在目标文件hello.o中（二进制文件）。
    
       链接阶段：hello程序调用了printf函数（标准C库中的一个函数），printf存在于另一个叫做printf.o的编译好了的目标文件中,这个文件必须用某种方式合并到hello.o程序中。连接器就处理这种合并。
    
    **1.5 系统硬件组成**
    
      1、总线 ：贯穿整个系统的一组电子管道称作为总线，它携带信息字节负责在各个部件之间传递
    
      2、I/O设备 ：I/O设备是系统与外部世界联系的通道。鼠标键盘作为输入设备，显示器磁盘作为输出设备。每个I/O设备都通过适配器或控制器与总线相连。

![system](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/system.png)

        3、主存：主存是一个临时存储设备，在处理器执行程序时，用来存放程序和程序处理的数据。

 	   4、处理器：中央处理单元（CPU）简称处理器，是执行储存在主存中指令的引擎，核心是一个大小为一个字节的存储设备（寄存器）。



   	**1.6运行hello程序**

        shell执行一系列指令加载可执行的hello文件，这些指令将hello目标文件中的数据从磁盘复制到主存，一旦目标文件hello中的代码和数据被加载到了主存，处理器就开始执行hello程序main程序中的机器语言指令。这些指令将"hello world\n"字符串中的字节从主存复制到寄存器文件，再从寄存器文件复制到显示设备，最终显示在屏幕上。

![show](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/show.png)

#### **二、高速缓存**

         系统花费大量的时间把信息从一个地方复制到另一个地方，这些复制就是开销，减慢了程序“真正的”工作，因此系统设计者的一个主要目标就是使这些复制操作尽可能快的完成。
    
         根据机械原理，较大的存储设备要比较小的存储设备运行的慢，而快速设备的造价要远高于同类低速设备。比如：一个系统上的磁盘比主存要大1000倍，但是对处理器而已，从磁盘读取一个字的时间比从主存读取一个字的时间开销要大1000万倍。类似的从寄存器文件中读取数据比从主存中读取几乎快100倍，而寄存器只能存储几百字节信息，而主存可以存放几十亿字节。
    
    	 针对这种处理器与主存之间的差异，系统设计者采用了更小更快的存储设备，成为高速缓存存储器作为暂时的集结区域存放处理器近期可能会需要的信息。

![memory](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/memory.png)

      计算机系统中存储设备的存储器层次结构

![level_memory7](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/level_memory7.png)

**三、操作系统管理硬件**

		所有应用程序对硬件的操作尝试都必须经过操作系统。操作系统有两个基本功能（1）防止硬件被时空的应用程序滥用；（2）向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备。操作系统通过几个基本的抽象概念来实现（进程、虚拟内存、文件）这两个功能

![hardware](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/hardware.png)



**四、进程**

		进程是操作系统对一个正在运行的程序的一种抽象。在一个系统上可以同时运行多个进程，而每个进程都好像在独占地使用硬件。
	
		操作系统保持跟踪进程运行所需的所有状态信息，这种状态也就是上下文。包括许多信息，比如PC何寄存器文件的当前值，以及主存的内容。在任何一个时刻处理器都只能执行一个进程的代码。当操作系统决定要把控制权从一个进程转移另一个进程时，就会进行上下文切换，即保存当前进程的上下文，恢复新锦成的上下文，然后将控制权转移到新进程，新进程就会从上次停止的地方开始。



**五、线程**

		通常我们认为一个进程只有单一的控制流，但是在现代系统中，一个进程实际上可以有多个称为线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和全局数据。



**六、虚拟内存**

		虚拟内存是一个抽象概念，它为每个进程提供了一个假象，即每个进程都在独占的使用主存。每个进程看到的内存都是一致的，成为虚拟地址空间。

地址空间最上面的区域是保留给操作系统中代码和数据的，这对所有进程来说都是一样的。地址空间底部区域存放用户进程定义的代码和数据，途中地址从下往上是增大的。

![xuni_memory](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/xuni_memory.png)

**七、系统之间通过网络通信**

		现代系统通过网络和其他系统连接到一起，网络可以视为一个I/O设备。当系统从主存复制一串字节到网络适配器时，数据流经过网络到达另一台机器，而不是比如说到达本地磁盘启动器。相似的系统可以读取从其他机器发送来的数据，并把数据复制到自己的主存。
	
		使用telnet应用在一个远程主机上运行hello程序

![Internet](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/Internet.png)



**八、Amdahl定律**

![Amdahl](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/Amdahl.png)



**九、并发和并行**

		线程级并发：构建在进程这个抽象之上，我们能设计出同时有多个程序执行的系统。这就导致了并发。
	
		指令级并行：现代处理器可以执行多条指令的属性成为指令级并行。
	
		单指令、多数据并行：在最低层次上许多现代处理器拥有特殊硬件，允许一条指令产生多个可以并执行的操作，这种方式成为单指令多数据，即SIMD并行。



###### 第一章知识自我总结及理解：

###### 1、通过hello world小程序了解了一个程序的创建到执行经过了哪些过程以及每个过程中系统做了哪些处理。

###### 2、系统的运行效率和内存的关系。越大的东西运行起来会越慢，反之则快。放到计算机系统中也一样，从硬盘中读取数据慢，从主存中读取数据快，但是主存要比硬盘小很多。所以这个道理是不是固态硬盘比机械硬盘读写要快但是要贵的原因。

###### 3、计算机通过网络传输数据其实也就是信息的复制，首先本机通过操作指令获取网络数据然后读取复制到自己的内存中然后通过CPU处理之后再由显示器显示出来，这样理解不知道对不对。

###### 4、概念性的东西记得有点模糊，过了一遍，在看应该有印象。Admhl定律公式没记住。



## 						第二章  信息的表示和处理

		现代计算机存储和处理的信息以二值信号表示。这些微不足道的二进制数字（位）形成了数字革命的基础。
	
		三种重要的数字表示。无符号编码基于传统的二进制表示法，表示大于或者等于0的数字，有符号整数就是可以为正或者负的数字。浮点数编码是表示实数的科学计数法的以2为基数的版本。计算机用这些不同的表示方法实现算数运算。



##### 	一、信息存储

			大多数计算机使用8位的块或者字节作为最小的可寻址的内存单位，而不是访问内存中单独的位。机器级程序将内存视为一个非常大的字节数组，成为虚拟内存。内存的每个字节都由一个唯一的数字来标识称为它的地址，所有可能的地址的集合称为虚拟地址空间。
	
			十六进制表示法（0-9，A-F），下图展示了16进制对应的十进制和二进制的值

![16](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/16.png)

			C语言中以0X开头的数字常亮被认为是16进制的值，字符A-F可以大小写。
	
			2进制转换16进制  比如0011101 从左到右4个位一组，不足4个前面补0.所以可以分为0001和1101.可以用8421法进行转换即第一组计算为0x2^3+0x2^2+0x2^1+1x2^0 = 1,第二组可以计算变成1x2^3+1x2^2+0x2^1+1x2^0=13,13对于的16进制是D，所以改组二进制转换16进制为1D
	
		   16进制转换2进制一样的方法。比如16进制3F换成2进制用8421法第一个数字3那就只能是2+1的可能，所以前面两个数字都是0，第一组即为0011，F对应数字是15，所以也只有8+4+2+1=15，即1111，所以3F对应的二进制是00111111.



##### 	二、字数据大小

			每台计算机都有一个字长，指明指针数据的标称大小。

![size](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/size.png)

##### 三、寻址和字节顺序

		对于跨越多字节的程序对象，我们必须建立两个规则：这个对象的地址是什么，以及在内存中如何排列这些字节。

![gz](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/gz.png)

##### 	四、布尔代数简介

![bool](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/bool.png)

#####    五、位级运算

![math](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/math.png)

##### 	六、位移运算

![move](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/move.png)

##### 	七、整数表示

			用位来编码整数的两种不同的方式：一种智能是表示非负数，而另一种能够表示负数、零和正数。

![zhengshu](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/zhengshu.png)

	整数数据类型32位：

![area](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/area.png)

	整数数据类型64位：

![area64](/Users/xiangzongjun/Computer-basics/深入理解计算机原理/xiangzongjun/img/area64.png)

​	

###### 	第二章阶段总结

###### 	1.对进制间的转换已经了解能够运算。

###### 	2.布尔代数也了解了怎么运算的。

###### 	3.剩下部分比如补码等章节过了一遍，感觉公式很多不是记得很明白，大概有个印象。本章没有过多文字概念性的东西，数学公式偏多。也就是理解了简单基础的一些东西。发现了自我薄弱的地方，通过本周学习以及路哥的建议，下周阅读中改进方法，加快一点进度，不要过于深究一些东西，太费时间。