2020/6/1

---

### 第一章 计算机系统漫游

#### 1.1 信息就是上下文

1. 源程序就是一个由0和1组成的位序列，一个`字节`8位。

2. 大部分的计算机都是用ASCII标准来表示文本字符。
3. C从一开始是作为一种用于Unix系统的程序语言开发出来的。

#### 1.2 程序的编译过程

> 预处理->编译->汇编->链接

1. **预处理**：将.c文件中引用的.h文件直接插入程序文本中，是个.i文件。
2. **编译**：将.i文件翻译成.s文件，是一个汇编程序。
3. **汇编**：将.s翻译成机器语言指令，生成.o文件。
4. **链接**：将程序中引用的一些预编译好的文件合并到.o中，例如printf.o，生成一个可执行的文件。

> GCC是GNU（GNU是GNU's Not Unix的缩写）项目开发出来的众多工具之一。

#### 1.3 了解编译系统如何工作的好处

1. 优化程序性能。
2. 理解链接时出现的错误。
3. 避免安全漏洞。

#### 1.4 处理器读并解释存在内存中的指令

##### 1.4.1 系统硬件的组成

1. **总线**，通常总线被设计成传送定长的字节块，也就是字（word）。大多数机器字长也么是4个字节（32位），要么是8个字节（64位）。
2. **I/O设备**，每个I/O设备通过一个控制器或者适配器与I/O总线相连。控制器和适配器之间的区别主要在于他们的封装方式。
3. **主存**，主存是一个临时的存储设备，在处理器执行程序时，用来存放程序和程序处理的数据。主存由一组`动态随机存取存储器(DRAM)芯片`组成。
4. **处理器**，解释（或执行）存储在主存中指令的引擎。
   1. 程序计数器（PC），指向主存中的某条机器语言指令（即含有该指令的地址）。

##### 1.4.2 运行hello程序

#### 1.5 高速缓存至关重要

1. 为什么要有高速缓存？

   主要是为了解决cpu运行速度和本地磁盘速度差距太大，导致cpu的性能被磁盘限制，使用高速缓存可以极大的提高计算机处理速度，吞吐量。

#### 1.6 存储设备形成层次结构

由于存储设备越小速度越快，每字节更贵，所以计算机通常会使用到多级的高速缓存，越往上级存储越小，速度越快，这样不仅解决了缓存速度问题，同时也增大缓存，节约成本。

#### 1.7 操作系统管理硬件

我们可以把操作系统看成是应用程序和硬件直接插入的一层软件，所有应用程序对硬件的操作尝试都必须通过操作系统。

操作系统的2个基本功能：

1. 防止硬件被失控的程序滥用。
2. 向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备。

> 20世纪80年代中期，Unix厂商视同通过加入新的、往往不兼容的特性来使它们的程序与众不同，为了阻止这种趋势，IEEE开始努力标准化Unix开发，后来由Richard Stallman命名为“Posix”。结果就得到了一系列的标准，称作Posix标准。

##### 1.7.1 进程

进程是操作系统对一个正在运行的程序的一种抽象。一个系统上可以同时运行多个进程。

1. 为什么要有进程？
2. 引入进程导致了什么问题？

##### 1.7.2 线程

一个进程可以运行多个线程，每个线程共享同样的代码和全局数据，使得线程一般来说都比进程更高效。

1. 有了进程为什么还要线程？
2. 线程是如何实现的？
3. 线程的引入带来了什么问题？

##### 1.7.3 虚拟内存

虚拟内存是一个抽象概念，它为每个进程提供了一个假象，即每个进程都独占地使用主存。每个进程看到的内存都是一致的，称为`虚拟地址空间`

1. 进程虚拟空间的结构
   1. 程序代码和数据
   2. 堆
   3. 共享库
   4. 栈
   5. 内核虚拟内存

##### 1.7.4 文件

文件就是字节序列。

##### 并发和并行

并发：同时具有多个活动的系统。

并行：用并发来使一个系统运行得更快。