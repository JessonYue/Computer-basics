### 程序的机器级表示

#### 3.2 程序编码

##### 3.2.1 机器级代码

**两种尤为重要的抽象**  

1. 由指令及体系结构或指令集架构来定义机器级程序的格式和行为，她定义了处理器状态、指令格式，以及每条指令对状态的影响。
2. 机器级程序使用的内存地址是虚拟地址，提供的内存模型看上去是一个非常大的字节数组。

- **程序计数器**，给出将要执行的下一条指令在内存中的地址。
- **整数寄存器文件**包含16个命名的位置，分别存储64位的值。这些寄存器可以存储地址或整数数据。有的寄存器用来记录某些重要的程序状态，而其它的寄存器用来保存临时数据，例如过程的参数和局部变量，以及函数的返回值。
- **条件码寄存器**保存着最近执行的算术或逻辑指令的状态信息。
- **一组向量寄存器**可以存放一个或多个整数或浮点数值。

**程序内存用虚拟地址来寻址，在任意给定的时刻，只有有限的一部分虚拟地址被认为是合法的。**

> gcc -Og -S main.c  命令可以生成main.s，即main.c的汇编代码

#### 3.3 数据格式


| C声明  | 汇编后代码后缀 | 大小（字节） |
| :----: | :------------: | :----------: |
|  char  |       b        |      1       |
| short  |       w        |      2       |
|  int   |       l        |      4       |
|  long  |       q        |      8       |
| char*  |       q        |      8       |
| float  |       s        |      4       |
| double |       l        |      8       |

从表中可以看到汇编代码使用后缀'l'来表示4字节整数和8字节双精度浮点数。这不会产生歧义，因为浮点数使用的是一组完全不同的指令和寄存器。

#### 3.4 访问信息

一个x86-64的中英处理器包含一组16个存储64位值的通用目的寄存器，这些寄存器用来存储整数数据和指针。

寄存器名字的由来历史，增强寄存器的记忆。

所有16个寄存器的低位部分都可以作为字节、字、双字、四字数字来访问

##### 3.4.1 操作数指示符

不同的操作数可能被分为3中类型

1. 立即数，用来表示常数值
2. 寄存器，表示某个寄存器的内容
3. 内存引用，根据计算出来的地址访问某个内存位置