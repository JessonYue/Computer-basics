### 段选择符和段寄存器

一个逻辑地址有两部分组成：一个段标识符和一个指定段内相对地址的偏移量。

段标识符是一个16位长的字段，称为段选择符，段偏移量是一个32位长的字段。

段描述符放在全局描述符表（GDT）或局部描述符表（LDT）中。

通常只定义一个GDT，而每个进程除了存放在GDT中的段之外如果还需要创建附加的段，就可以由自己LDT。GDT在主存中的地址和大小存放在 gdtr 控制器中，当前正被使用的 LDT 地址和大小放在 ldtr 控制寄存器中。

### Linux 中被广泛采用的类型：

代码段描述符：表示这个段描述符代表一个代码段，它可以放在GDT 或LDT中。该描述符置 S 标志位1（非系统段）。

数据段描述符：表示这个段描述符代表一个数据段，它可以放在 GDT 或 LDT 中。该描述符置 S 标志位1 。栈段是通过一般的数据段实现的。

任务状态段描述符（TSSD）：表示这个段描述符代表一个任务状态段（TSS），也就是说这个段用于保存处理器寄存器的内容。它只能出现在 GDT 中。

局部描述符表描述符（LDTD）：表示这个段描述符代表一个包含 LDT 的段，它只出现在 GDT 中。相应的 Type 字段的值为2， S 标志置为0.

### Linux 中的分段

分段可以给每一个进程分配不同的线程地址空间，而分页可以把统一线性地址空间映射到不同的物理空间。

与分段相比，Linux 更习惯使用分页方式：

1、当所有进程使用相同的段寄存器值时，内存管理变得更加简单，也就是说它们能共享同样的一组线性地址。

2、Linux 设计目标之一是可以把它移植到绝大多数流行的处理器平台上。

运行在用户态的所有 Linux 进程都使用一对相同的段来对指令和数据寻址。这两个段就是所谓的用户代码段和用户数据段。

### 物理地址扩展（PAE）分页机制

硬件高速缓存：硬件高速缓存基于著名的局部性原理，该原理既实用程序结构也适用于数据结构。

这种内存物理地址通常分为3组：最高纪委对应标签，中间几位对应高速缓存控制器的子集索引，最低几位对应行内的偏移量

每个CPU 都有自己的本地硬件高速缓存。但是现在更新变得更耗时：只要一个 CPU 修改了它的硬件高速缓存，他就必须检查同样的数据是否包含在其他的硬件高速缓存中，如果是，他必须通知其他 CPU 用适当的值对其更新。这种情况被叫做高速缓存侦听。

### Linux中的分页

Linux 的进程处理很大程度上依赖于分页。

1、给每一个进程分配一块不同的物理地址空间，这确保了可以有效的防止寻址错误。

2、区别页和页框（主存中的物理地址）之间。这就允许存放在某个页框中的一个页，然后保存到磁盘上，以后重新装入这同一页时又可以被装在不同页框中。



